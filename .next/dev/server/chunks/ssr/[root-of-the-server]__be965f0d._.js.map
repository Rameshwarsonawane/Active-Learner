{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 14, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/sonwa/OneDrive/Documents/nextjs/app/page.tsx"],"sourcesContent":["// \"use client\";\n\n// import React, { useState, useEffect } from 'react';\n// import { User, Course, Enrollment, LessonProgress, LessonStatus, Badge, Lesson } from '../lib/types';\n// import { db, supabase } from '../lib/supabaseClient';\n\n// export default function Page() {\n//   const [user, setUser] = useState<User | null>(null);\n\n//   useEffect(() => {\n//     setUser({ id: 'u1', name: 'Learner', email: 'test@example.com' });\n//   }, []);\n\n//   const handleSelectCourse = (id: string) => {\n//     console.log(\"Selected Course:\", id);\n//   };\n\n//   if (!user) {\n//     return (\n//       <div className=\"flex items-center justify-center h-screen bg-[#002b36]\">\n//         <div className=\"animate-spin text-[#268bd2] text-3xl\">\n//           <i className=\"fa-solid fa-circle-notch\"></i>\n//         </div>\n//       </div>\n//     );\n//   }\n\n//   return <Dashboard user={user} onSelectCourse={handleSelectCourse} />;\n// }\n\n// const Dashboard: React.FC<{ \n//   user: User, \n//   onSelectCourse: (id: string) => void \n// }> = ({ user, onSelectCourse }) => {\n//   const [courses, setCourses] = useState<Course[]>([]);\n//   const [enrollments, setEnrollments] = useState<Enrollment[]>([]);\n//   const [progress, setProgress] = useState<LessonProgress[]>([]);\n//   const [badges, setBadges] = useState<Badge[]>([]);\n//   const [allLessons, setAllLessons] = useState<Lesson[]>([]);\n//   const [loading, setLoading] = useState(true);\n//   const [isSyncing, setIsSyncing] = useState(false);\n\n//   const fetchData = async () => {\n//     try {\n//       setLoading(true);\n//       const [c, e, p, b] = await Promise.all([\n//         db.getCourses(),\n//         db.getEnrollments(user.id),\n//         db.getProgress(user.id),\n//         db.getBadges(user.id)\n//       ]);\n      \n//       setCourses(c);\n//       setEnrollments(e);\n//       setProgress(p);\n//       setBadges(b);\n\n//       const { data: lessonData } = await supabase.from('lessons').select('*');\n//       if (lessonData) {\n//         setAllLessons(lessonData.map(l => ({\n//           id: l.id,\n//           courseId: l.course_id,\n//           title: l.title,\n//           content: l.content,\n//           order: l.lesson_order\n//         })));\n//       }\n//     } catch (err) {\n//       console.error(\"Error loading dashboard:\", err);\n//     } finally {\n//       setLoading(false);\n//     }\n//   };\n\n//   useEffect(() => {\n//     fetchData();\n//   }, [user.id]);\n\n//   const syncBadges = async () => {\n//     if (enrollments.length === 0 || allLessons.length === 0) return;\n//     setIsSyncing(true);\n//     let changed = false;\n//     try {\n//       for (const enrollment of enrollments) {\n//         const hasBadge = badges.some(b => b.courseId === enrollment.courseId);\n//         if (!hasBadge) {\n//           const courseLessons = allLessons.filter(l => l.courseId === enrollment.courseId);\n//           if (courseLessons.length > 0) {\n//             const completedInCourse = progress.filter(p => \n//               p.status === LessonStatus.COMPLETED && \n//               courseLessons.some(cl => cl.id === p.lessonId)\n//             );\n//             if (completedInCourse.length === courseLessons.length) {\n//               const awarded = await db.awardBadgeIfComplete(user.id, enrollment.courseId);\n//               if (awarded) changed = true;\n//             }\n//           }\n//         }\n//       }\n//       if (changed) {\n//         const freshBadges = await db.getBadges(user.id);\n//         setBadges(freshBadges);\n//       }\n//     } catch (err) {\n//       console.error(\"Badge sync failed:\", err);\n//     } finally {\n//       setIsSyncing(false);\n//     }\n//   };\n\n//   useEffect(() => {\n//     if (!loading && enrollments.length > 0 && allLessons.length > 0) {\n//       syncBadges();\n//     }\n//   }, [loading, enrollments.length, allLessons.length]);\n\n//   const getCourseStats = (courseId: string) => {\n//     const courseLessons = allLessons.filter(l => l.courseId === courseId);\n//     const total = courseLessons.length;\n//     if (total === 0) return { completedCount: 0, total: 0, percent: 0 };\n//     const completedCount = progress.filter(p => \n//       p.status === LessonStatus.COMPLETED && \n//       courseLessons.some(cl => cl.id === p.lessonId)\n//     ).length;\n//     return {\n//       completedCount,\n//       total,\n//       percent: Math.min(100, Math.round((completedCount / total) * 100))\n//     };\n//   };\n\n//   const enrolledCourses = enrollments.map(e => courses.find(c => c.id === e.courseId)).filter(Boolean) as Course[];\n//   const completedLessons = progress.filter(p => p.status === LessonStatus.COMPLETED);\n//   const averageScore = completedLessons.length > 0 \n//     ? Math.round(completedLessons.reduce((acc, curr) => acc + curr.bestScore, 0) / completedLessons.length) \n//     : 0;\n\n//   if (loading) return (\n//     <div className=\"flex items-center justify-center h-[50vh]\">\n//       <div className=\"flex flex-col items-center gap-4\">\n//         <i className=\"fa-solid fa-circle-notch animate-spin text-[#268bd2] text-3xl\"></i>\n//         <span className=\"text-[10px] font-bold text-[#586e75] uppercase tracking-widest\">Retrieving Progress...</span>\n//       </div>\n//     </div>\n//   );\n\n//   return (\n//     <div className=\"max-w-5xl mx-auto p-6 md:p-12 space-y-12 pb-20 bg-[#002b36] min-h-screen\">\n//       <header className=\"flex flex-col md:flex-row md:items-end justify-between gap-4\">\n//         <div>\n//           <h1 className=\"text-3xl font-bold text-[#eee8d5]\">Hello, {user.name}</h1>\n//           <p className=\"text-[#586e75] mt-1 font-medium italic\">welcome back.</p>\n//         </div>\n//         <button \n//           onClick={() => { fetchData(); syncBadges(); }}\n//           className=\"flex items-center gap-2 text-[10px] font-bold text-[#586e75] hover:text-[#268bd2] uppercase tracking-widest transition-colors group\"\n//         >\n//           <i className={`fa-solid fa-arrows-rotate ${isSyncing ? 'animate-spin' : ''}`}></i>\n//           {isSyncing ? 'Syncing Achievement Data...' : 'Refresh Progress'}\n//         </button>\n//       </header>\n\n//       <div className=\"grid grid-cols-1 sm:grid-cols-3 gap-6\">\n//         {[\n//           { label: 'Lessons Completed', value: completedLessons.length },\n//           { label: 'Courses Enrolled', value: enrolledCourses.length},\n//           { label: 'Average Score', value: `${averageScore}%` }\n//         ].map((stat, i) => (\n//           <div key={i} className=\"p-6 bg-[#073642] border border-[#586e75]/20 rounded-2xl flex items-center justify-between\">\n//             <div>\n//               <p className=\"text-[10px] font-bold text-[#586e75] uppercase tracking-widest mb-1\">{stat.label}</p>\n//               <p className=\"text-3xl font-bold text-[#eee8d5]\">{stat.value}</p>\n//             </div>\n//           </div>\n//         ))}\n//       </div>\n\n//       <section>\n//         <h2 className=\"text-xl font-bold text-[#eee8d5] mb-8\">My Active Courses</h2>\n//         <div className=\"grid grid-cols-1 md:grid-cols-2 gap-8\">\n//           {enrolledCourses.map(course => {\n//             const stats = getCourseStats(course.id);\n//             const badge = badges.find(b => b.courseId === course.id);\n//             const isFinished = stats.percent === 100;\n\n//             return (\n//               <div \n//                 key={course.id} \n//                 onClick={() => onSelectCourse(course.id)} \n//                 className={`bg-[#073642] p-8 rounded-2xl border transition-all cursor-pointer relative overflow-hidden flex flex-col ${\n//                   isFinished ? 'border-[#859900]/40' : 'border-[#586e75]/20 hover:border-[#268bd2]/50'\n//                 }`}\n//               >\n//                 {badge && <div className=\"absolute top-4 right-4 text-3xl\">{badge.icon}</div>}\n//                 <h3 className=\"text-xl font-bold text-[#eee8d5] mb-2\">{course.title}</h3>\n//                 <p className=\"text-[#839496] text-sm mb-6 line-clamp-2\">{course.description}</p>\n//                 <div className=\"w-full bg-[#002b36] h-1.5 rounded-full overflow-hidden\">\n//                   <div \n//                     className={`h-full transition-all duration-1000 ${isFinished ? 'bg-[#859900]' : 'bg-[#268bd2]'}`}\n//                     style={{ width: `${stats.percent}%` }}\n//                   ></div>\n//                 </div>\n//               </div>\n//             );\n//           })}\n//         </div>\n//       </section>\n//     </div>\n//   );\n// };\n\n\n\n\nexport default function Page() {\n  return <div className=\"bg-red-500 text-white p-6\">Tailwind OK</div>;\n}\n"],"names":[],"mappings":"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"}}]
}